{% set name = "occt-rt" %}
{% set version = "1.1.0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  path: ../..

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}  # [not win]
    - cmake >=3.18
    - ninja
    - swig >=4.0
  host:
    - python
    - pip
    - numpy >=1.26
    - occt =7.8.1
    - embree >=4
  run:
    - python
    - numpy >=1.26
    - embree >=4
    # pythonocc-core is optional - users install separately if needed for shape input

test:
  imports:
    - occt_rt
    - occt_rt._OCCTRT
  requires:
    - pytest
  commands:
    - python -c "from occt_rt import Raytracer; print('OK')"

about:
  home: https://github.com/PozzettiAndrea/occt-rt-python
  license: LGPL-2.1-or-later
  license_family: LGPL
  license_file: LICENSE
  summary: High-performance BVH raytracer for OpenCASCADE
  description: |
    OCCT-RT provides BVH-accelerated ray-surface intersection for OpenCASCADE
    shapes. Features include:
    - High performance: 6M+ rays/sec on 8-core systems
    - Multiple backends: OCCT BVH (default), Intel Embree with SIMD
    - OpenMP parallelization for batch ray processing
    - Newton refinement for exact surface intersection
    - Curvature computation at hit points
  dev_url: https://github.com/PozzettiAndrea/occt-rt-python
  doc_url: https://github.com/PozzettiAndrea/occt-rt-python#readme

extra:
  recipe-maintainers:
    - PozzettiAndrea
